<div class="h-screen flex flex-col bg-gray-100">
  <!-- Top Navigation -->
  <nav class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <lucide-icon
          [img]="storeIcon"
          class="w-8 h-8 text-blue-600"
        ></lucide-icon>
        <h1 class="text-2xl font-bold text-gray-800">POS System</h1>
      </div>

      <div class="flex items-center gap-2">
        <button
          (click)="activeTab.set('dashboard')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'dashboard'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="analyticsIcon" class="w-4 h-4"></lucide-icon>
          Dashboard
        </button>

        <button
          (click)="activeTab.set('sales')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'sales'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="storeIcon" class="w-4 h-4"></lucide-icon>
          Sales
        </button>

        <button
          (click)="activeTab.set('products')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'products'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="packageIcon" class="w-4 h-4"></lucide-icon>
          Products
        </button>

        <button
          (click)="activeTab.set('purchases')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'purchases'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="shoppingCartIcon" class="w-4 h-4"></lucide-icon>
          Purchases
        </button>

        <button
          (click)="activeTab.set('stock')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'stock'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="packageIcon" class="w-4 h-4"></lucide-icon>
          Stock
        </button>

        <button
          (click)="activeTab.set('sales-returns')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'sales-returns'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="returnIcon" class="w-4 h-4"></lucide-icon>
          Returns
        </button>

        <button
          (click)="activeTab.set('categories')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'categories'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="tagIcon" class="w-4 h-4"></lucide-icon>
          Categories
        </button>

        <button
          (click)="activeTab.set('suppliers')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'suppliers'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="usersIcon" class="w-4 h-4"></lucide-icon>
          Suppliers
        </button>

        <button
          (click)="activeTab.set('history')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'history'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="historyIcon" class="w-4 h-4"></lucide-icon>
          History
        </button>

        <button
          (click)="activeTab.set('settings')"
          [class]="
            'flex items-center gap-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ' +
            (activeTab() === 'settings'
              ? 'bg-blue-100 text-blue-700'
              : 'text-gray-600 hover:bg-gray-100')
          "
        >
          <lucide-icon [img]="settingsIcon" class="w-4 h-4"></lucide-icon>
          Settings
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="flex-1 flex overflow-hidden">
    <!-- Dashboard View -->
    <div
      *ngIf="activeTab() === 'dashboard'"
      class="flex-1 overflow-y-auto bg-gray-50"
    >
      <app-inventory-dashboard></app-inventory-dashboard>
    </div>

    <!-- Sales View -->
    <div *ngIf="activeTab() === 'sales'" class="flex-1 flex">
      <!-- Products Section -->
      <div class="flex-1">
        <app-product-grid></app-product-grid>
      </div>

      <!-- Cart Section -->
      <div class="w-96 border-l border-gray-200">
        <app-cart (proceedToPayment)="showPayment.set(true)"></app-cart>
      </div>
    </div>

    <!-- Products Management View -->
    <div *ngIf="activeTab() === 'products'" class="flex-1 bg-gray-50">
      <app-product-management></app-product-management>
    </div>

    <!-- Purchases Management View -->
    <div *ngIf="activeTab() === 'purchases'" class="flex-1 bg-gray-50">
      <app-purchase-management></app-purchase-management>
    </div>

    <!-- Stock Management View -->
    <div *ngIf="activeTab() === 'stock'" class="flex-1 bg-gray-50">
      <app-stock-management></app-stock-management>
    </div>

    <!-- Sales Returns View -->
    <div *ngIf="activeTab() === 'sales-returns'" class="flex-1 bg-gray-50">
      <div class="h-full flex">
        <div class="flex-1">
          <app-sales-returns></app-sales-returns>
        </div>
        <div class="w-px bg-gray-200"></div>
        <div class="flex-1">
          <app-purchase-returns></app-purchase-returns>
        </div>
      </div>
    </div>

    <!-- Categories Management View -->
    <div *ngIf="activeTab() === 'categories'" class="flex-1 bg-gray-50">
      <app-category-management></app-category-management>
    </div>

    <!-- Suppliers Management View -->
    <div *ngIf="activeTab() === 'suppliers'" class="flex-1 bg-gray-50">
      <app-supplier-management></app-supplier-management>
    </div>

    <!-- History View -->
    <div *ngIf="activeTab() === 'history'" class="flex-1">
      <div class="bg-white h-full">
        <app-order-history></app-order-history>
      </div>
    </div>

    <!-- Settings View -->
    <div *ngIf="activeTab() === 'settings'" class="flex-1 p-6">
      <div class="bg-white rounded-xl shadow-sm h-full">
        <div class="p-6 border-b border-gray-200">
          <h2 class="text-xl font-bold text-gray-800">Settings</h2>
        </div>
        <div class="p-6">
          <div class="text-center py-12">
            <div class="text-6xl mb-4">⚙️</div>
            <h3 class="text-lg font-semibold text-gray-600 mb-2">
              System Settings
            </h3>
            <p class="text-gray-500">Configure your POS system settings here</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Payment Modal -->
<app-payment
  *ngIf="showPayment()"
  (paymentComplete)="onPaymentComplete()"
  (paymentCancelled)="onPaymentCancelled()"
></app-payment>

<!-- Receipt Modal -->
<app-receipt
  *ngIf="showReceipt() && completedOrder()"
  [order]="completedOrder()!"
  (receiptClosed)="onReceiptClosed()"
></app-receipt>

<!-- Notifications -->
<app-notifications></app-notifications>
